var inac,timeInactivo=0;function inactivo(){300==++timeInactivo&&(localStorage.setItem("timeInac",timeInactivo),clearInterval(inac),alert("Expired Session"))}function clearTime(){timeInactivo=0}class EstadosMateria{constructor(a,e,r,o,t){this.aprobada=a,this.cursando=e,this.no_tomada=r,this.materia=o,this.semestre=t,this.addEvent()}addEvent(){this.aprobada.addEventListener("change",(()=>{stateUpdate(this.semestre,this.materia.id,APROBADA)})),this.cursando.addEventListener("change",(()=>{stateUpdate(this.semestre,this.materia.id,CURSANDO)})),this.no_tomada.addEventListener("change",(()=>{stateUpdate(this.semestre,this.materia.id,NO_TOMADA)}))}estadoActivo(){return this.aprobada.checked?this.aprobada:this.cursando.checked?this.cursando:this.no_tomada.checked?this.no_tomada:void 0}}class Semestre{constructor(){this.materias=[]}addMateria(a){this.materias.push(a)}}var CHECKEDS=[];function readMateria(a,e){dataPensum.child(a).once("value").then((function(e){for(let r in e.val())dataPensum.child(a).child(r).once("value").then((a=>{var e=a.val(),o=e.estadoActual+""+e.id,t=document.getElementById(o);null==t&&console.log(o),t.checked=!0;var s=document.getElementById(r).childNodes[3];e.estadoActual==APROBADA?s.style.background="green":e.estadoActual==CURSANDO?s.style.background="orange":s.style.background="gray"}))})),e()}function init(){document.getElementById("logout").addEventListener("click",(()=>{window.location.replace("../index.html")}));var a=localStorage.getItem("timeInac");document.addEventListener("touchmove",clearTime),document.onmousemove=clearTime,document.onclick=clearTime,document.addEventListener("keypress",clearTime),300==Number.parseInt(a)&&(localStorage.setItem("timeInac",0),window.location.replace("../index.html"));var e=localStorage.getItem("ruta");dataPensum=firebase.database().ref(e),"informatica"==localStorage.getItem("carrera")?(readInfo("semestre1"),readInfo("semestre2"),readInfo("semestre3"),readInfo("semestre4"),readInfo("semestre5"),readInfo("semestre6"),readInfo("semestre7"),readInfo("semestre8"),readInfo("semestre9")):"sistemas"==localStorage.getItem("carrera")&&(readInfo("semestre1"),readInfo("semestre2"),readInfo("semestre3"),readInfo("semestre4"),readInfo("semestre5"),readInfo("semestre6"));try{actualizarInfo()}catch(a){}for(let a=0;a<9;a++){var r=new Semestre;SEMESTRES_USER.push(r)}"informatica"==localStorage.getItem("carrera")?(createInitMateriasInformatica(),addEventOpacity(5,45)):"sistemas"==localStorage.getItem("carrera")&&(createInitMateriasSistemas(),addEventOpacity(5,15)),inac=setInterval(inactivo,1e3)}function createInitMateriasInformatica(){readMateria("semestre1",(()=>initMateriasInformatica(1))),readMateria("semestre2",(()=>initMateriasInformatica(2))),readMateria("semestre3",(()=>initMateriasInformatica(3))),readMateria("semestre4",(()=>initMateriasInformatica(4))),readMateria("semestre5",(()=>initMateriasInformatica(5))),readMateria("semestre6",(()=>initMateriasInformatica(6))),readMateria("semestre7",(()=>initMateriasInformatica(7))),readMateria("semestre8",(()=>initMateriasInformatica(8))),readMateria("semestre9",(()=>initMateriasInformatica(9)))}function createInitMateriasSistemas(){readMateria("semestre1",(()=>initMateriasSistemas(1))),readMateria("semestre2",(()=>initMateriasSistemas(2))),readMateria("semestre3",(()=>initMateriasSistemas(3))),readMateria("semestre4",(()=>initMateriasSistemas(4))),readMateria("semestre5",(()=>initMateriasSistemas(5))),readMateria("semestre6",(()=>initMateriasSistemas(6)))}class ItemMenu{constructor(a){this.nodo=document.getElementById(a),null==this.nodo&&console.log(a),this.item=this.nodo.parentElement.childNodes[5],this.event()}event(){this.nodo.addEventListener("change",(()=>{this.nodo.checked?this.item.classList.add("show"):(this.item.classList.remove("show"),this.item.classList.add("hidden"),setTimeout((()=>{this.item.classList.remove("hidden")}),280))})),this.nodo.parentNode.addEventListener("mouseleave",(()=>{this.nodo.checked&&(this.item.classList.remove("show"),this.item.classList.add("hidden"),setTimeout((()=>{this.item.classList.remove("hidden"),this.nodo.checked=!1}),280))}))}}function addEventOpacity(a,e){var r=[];r.push(new ItemMenu("btn-menu"));for(let e=2;e<=a;e++){var o=new ItemMenu("btn-menuE"+e);r.push(o)}for(let a=2;a<=e;a++){o=new ItemMenu("btn-menu"+a);r.push(o)}}function initMateriasInformatica(a){1==a?(crearMateria("Algebra1","aprobadaAlgebra1","cursandoAlgebra1","no_tomadaAlgebra1","semestre1",0),crearMateria("Calculo1","aprobadaCalculo1","cursandoCalculo1","no_tomadaCalculo1","semestre1",0),crearMateria("FisicaGeneral","aprobadaFisicaGeneral","cursandoFisicaGeneral","no_tomadaFisicaGeneral","semestre1",0),crearMateria("Ingles1","aprobadaIngles1","cursandoIngles1","no_tomadaIngles1","semestre1",0),crearMateria("IntroProgramacion","aprobadaIntroProgramacion","cursandoIntroProgramacion","no_tomadaIntroProgramacion","semestre1",0)):2==a?(crearMateria("Algebra2","aprobadaAlgebra2","cursandoAlgebra2","no_tomadaAlgebra2","semestre2",1),crearMateria("Calculo2","aprobadaCalculo2","cursandoCalculo2","no_tomadaCalculo2","semestre2",1),crearMateria("ArquiComputadoras1","aprobadaArquiComputadoras1","cursandoArquiComputadoras1","no_tomadaArquiComputadoras1","semestre2",1),crearMateria("Ingles2","aprobadaIngles2","cursandoIngles2","no_tomadaIngles2","semestre2",1),crearMateria("Elementos","aprobadaElementos","cursandoElementos","no_tomadaElementos","semestre2",1),crearMateria("Programacion","aprobadaProgramacion","cursandoProgramacion","no_tomadaProgramacion","semestre2",1)):3==a?(crearMateria("Logica","aprobadaLogica","cursandoLogica","no_tomadaLogica","semestre3",2),crearMateria("CalculoNumerico","aprobadaCalculoNumerico","cursandoCalculoNumerico","no_tomadaCalculoNumerico","semestre3",2),crearMateria("ArquiComputadoras2","aprobadaArquiComputadoras2","cursandoArquiComputadoras2","no_tomadaArquiComputadoras2","semestre3",2),crearMateria("OrganizacionMetodos","aprobadaOrganizacionMetodos","cursandoOrganizacionMetodos","no_tomadaOrganizacionMetodos","semestre3",2),crearMateria("MedTecnProgramacion","aprobadaMedTecnProgramacion","cursandoMedTecnProgramacion","no_tomadaMedTecnProgramacion","semestre3",2),crearMateria("Grafos","aprobadaGrafos","cursandoGrafos","no_tomadaGrafos","semestre3",2)):4==a?(crearMateria("PrograFuncional","aprobadaPrograFuncional","cursandoPrograFuncional","no_tomadaPrograFuncional","semestre4",3),crearMateria("ProbEstadistica","aprobadaProbEstadistica","cursandoProbEstadistica","no_tomadaProbEstadistica","semestre4",3),crearMateria("TallerPrograBajoNivel","aprobadaTallerPrograBajoNivel","cursandoTallerPrograBajoNivel","no_tomadaTallerPrograBajoNivel","semestre4",3),crearMateria("BaseDatos1","aprobadaBaseDatos1","cursandoBaseDatos1","no_tomadaBaseDatos1","semestre4",3),crearMateria("SisInformacion1","aprobadaSisInformacion1","cursandoSisInformacion1","no_tomadaSisInformacion1","semestre4",3),crearMateria("Algoritmos","aprobadaAlgoritmos","cursandoAlgoritmos","no_tomadaAlgoritmos","semestre4",3)):5==a?(crearMateria("IA1","aprobadaIA1","cursandoIA1","no_tomadaIA1","semestre5",4),crearMateria("TallerSisOperativos","aprobadaTallerSisOperativos","cursandoTallerSisOperativos","no_tomadaTallerSisOperativos","semestre5",4),crearMateria("Automatas","aprobadaAutomatas","cursandoAutomatas","no_tomadaAutomatas","semestre5",4),crearMateria("BaseDatos2","aprobadaBaseDatos2","cursandoBaseDatos2","no_tomadaBaseDatos2","semestre5",4),crearMateria("SisInformacion2","aprobadaSisInformacion2","cursandoSisInformacion2","no_tomadaSisInformacion2","semestre5",4),crearMateria("GrafComputadora","aprobadaGrafComputadora","cursandoGrafComputadora","no_tomadaGrafComputadora","semestre5",4)):6==a?(crearMateria("IA2","aprobadaIA2","cursandoIA2","no_tomadaIA2","semestre6",5),crearMateria("Redes","aprobadaRedes","cursandoRedes","no_tomadaRedes","semestre6",5),crearMateria("LenguajesProgramacion","aprobadaLenguajesProgramacion","cursandoLenguajesProgramacion","no_tomadaLenguajesProgramacion","semestre6",5),crearMateria("TallerBaseDatos","aprobadaTallerBaseDatos","cursandoTallerBaseDatos","no_tomadaTallerBaseDatos","semestre6",5),crearMateria("IngSoftware","aprobadaIngSoftware","cursandoIngSoftware","no_tomadaIngSoftware","semestre6",5),crearMateria("PrograWeb","aprobadaPrograWeb","cursandoPrograWeb","no_tomadaPrograWeb","semestre6",5)):7==a?(crearMateria("Electiva1","aprobadaElectiva1","cursandoElectiva1","no_tomadaElectiva1","semestre7",6),crearMateria("Electiva2","aprobadaElectiva2","cursandoElectiva2","no_tomadaElectiva2","semestre7",6),crearMateria("TallerIngSoftware","aprobadaTallerIngSoftware","cursandoTallerIngSoftware","no_tomadaTallerIngSoftware","semestre7",6),crearMateria("ArquiSoftware","aprobadaArquiSoftware","cursandoArquiSoftware","no_tomadaArquiSoftware","semestre7",6),crearMateria("IntrHumanoCompu","aprobadaIntrHumanoCompu","cursandoIntrHumanoCompu","no_tomadaIntrHumanoCompu","semestre7",6),crearMateria("RedesAvanzadas","aprobadaRedesAvanzadas","cursandoRedesAvanzadas","no_tomadaRedesAvanzadas","semestre7",6)):8==a?(crearMateria("Electiva3","aprobadaElectiva3","cursandoElectiva3","no_tomadaElectiva3","semestre8",7),crearMateria("Electiva4","aprobadaElectiva4","cursandoElectiva4","no_tomadaElectiva4","semestre8",7),crearMateria("Electiva5","aprobadaElectiva5","cursandoElectiva5","no_tomadaElectiva5","semestre8",7),crearMateria("Electiva6","aprobadaElectiva6","cursandoElectiva6","no_tomadaElectiva6","semestre8",7),crearMateria("TallerGrado1","aprobadaTallerGrado1","cursandoTallerGrado1","no_tomadaTallerGrado1","semestre8",7),crearMateria("EvalAudiSistemas","aprobadaEvalAudiSistemas","cursandoEvalAudiSistemas","no_tomadaEvalAudiSistemas","semestre8",7),crearMateria("TallerGrado2","aprobadaTallerGrado2","cursandoTallerGrado2","no_tomadaTallerGrado2","semestre8",7)):9==a&&crearMateria("ModTitulacion","aprobadaModTitulacion","cursandoModTitulacion","no_tomadaModTitulacion","semestre9",8)}function initMateriasSistemas(a){1==a?(crearMateria("Algebra1","aprobadaAlgebra1","cursandoAlgebra1","no_tomadaAlgebra1","semestre1",0),crearMateria("Calculo1","aprobadaCalculo1","cursandoCalculo1","no_tomadaCalculo1","semestre1",0),crearMateria("FisicaGeneral","aprobadaFisicaGeneral","cursandoFisicaGeneral","no_tomadaFisicaGeneral","semestre1",0),crearMateria("Ingles1","aprobadaIngles1","cursandoIngles1","no_tomadaIngles1","semestre1",0),crearMateria("IntroProgramacion","aprobadaIntroProgramacion","cursandoIntroProgramacion","no_tomadaIntroProgramacion","semestre1",0)):2==a?(crearMateria("Algebra2","aprobadaAlgebra2","cursandoAlgebra2","no_tomadaAlgebra2","semestre2",1),crearMateria("Calculo2","aprobadaCalculo2","cursandoCalculo2","no_tomadaCalculo2","semestre2",1),crearMateria("ArquiComputadoras1","aprobadaArquiComputadoras1","cursandoArquiComputadoras1","no_tomadaArquiComputadoras1","semestre2",1),crearMateria("Ingles2","aprobadaIngles2","cursandoIngles2","no_tomadaIngles2","semestre2",1),crearMateria("Elementos","aprobadaElementos","cursandoElementos","no_tomadaElementos","semestre2",1)):3==a?(crearMateria("CalculoNumerico","aprobadaCalculoNumerico","cursandoCalculoNumerico","no_tomadaCalculoNumerico","semestre3",2),crearMateria("ArquiComputadoras2","aprobadaArquiComputadoras2","cursandoArquiComputadoras2","no_tomadaArquiComputadoras2","semestre3",2),crearMateria("MedTecnProgramacion","aprobadaMedTecnProgramacion","cursandoMedTecnProgramacion","no_tomadaMedTecnProgramacion","semestre3",2)):4==a?(crearMateria("ProbEstadistica","aprobadaProbEstadistica","cursandoProbEstadistica","no_tomadaProbEstadistica","semestre4",3),crearMateria("BaseDatos1","aprobadaBaseDatos1","cursandoBaseDatos1","no_tomadaBaseDatos1","semestre4",3),crearMateria("SisInformacion1","aprobadaSisInformacion1","cursandoSisInformacion1","no_tomadaSisInformacion1","semestre4",3)):5==a?(crearMateria("IA1","aprobadaIA1","cursandoIA1","no_tomadaIA1","semestre5",4),crearMateria("TallerSisOperativos","aprobadaTallerSisOperativos","cursandoTallerSisOperativos","no_tomadaTallerSisOperativos","semestre5",4),crearMateria("BaseDatos2","aprobadaBaseDatos2","cursandoBaseDatos2","no_tomadaBaseDatos2","semestre5",4),crearMateria("SisInformacion2","aprobadaSisInformacion2","cursandoSisInformacion2","no_tomadaSisInformacion2","semestre5",4)):6==a&&(crearMateria("Redes","aprobadaRedes","cursandoRedes","no_tomadaRedes","semestre6",5),crearMateria("TallerBaseDatos","aprobadaTallerBaseDatos","cursandoTallerBaseDatos","no_tomadaTallerBaseDatos","semestre6",5),crearMateria("IngSoftware","aprobadaIngSoftware","cursandoIngSoftware","no_tomadaIngSoftware","semestre6",5),crearMateria("PrograWeb","aprobadaPrograWeb","cursandoPrograWeb","no_tomadaPrograWeb","semestre6",5))}function crearMateria(a,e,r,o,t,s){var n=document.getElementById(a),i=document.getElementById(e),d=document.getElementById(r),c=document.getElementById(o),m=new EstadosMateria(i,d,c,n,t);SEMESTRES_USER[s].addMateria(m)}var aprobadasCant=0,cursandoCant=0;function readInfo(a){dataPensum.child(a).once("value").then((function(e){for(let r in e.val())dataPensum.child(a).child(r).once("value").then((a=>{var e=a.val();e.estadoActual==APROBADA?aprobadasCant++:e.estadoActual==CURSANDO&&cursandoCant++}));document.getElementById("h4Apro").innerHTML="Aprobadas: "+aprobadasCant,document.getElementById("h4Cur").innerHTML="Cursando: "+cursandoCant}))}function actualizarInfo(){for(let a=1;a<=9;a++)dataPensum.child("semestre"+a).on("child_changed",(a=>{var e=a.val(),r=document.getElementById(e.id).childNodes[3];e.estadoActual==APROBADA?(aprobadasCant++,r.style.background="green",document.getElementById("aprobada"+e.id).checked=!0,e.estadoAnterior==CURSANDO&&0!=cursandoCant&&cursandoCant--):e.estadoActual==CURSANDO?(cursandoCant++,r.style.background="orange",document.getElementById("cursando"+e.id).checked=!0,e.estadoAnterior==APROBADA&&0!=aprobadasCant&&aprobadasCant--):(r.style.background="gray",document.getElementById("no_tomada"+e.id).checked=!0,e.estadoAnterior==APROBADA?0!=aprobadasCant&&aprobadasCant--:e.estadoAnterior==CURSANDO&&0!=cursandoCant&&cursandoCant--),document.getElementById("h4Apro").innerHTML="Aprobadas: "+aprobadasCant,document.getElementById("h4Cur").innerHTML="Cursando: "+cursandoCant}))}window.addEventListener("load",init);